(this["webpackJsonpcxbi-front"]=this["webpackJsonpcxbi-front"]||[]).push([[0],{103:function(e,t,a){e.exports=a(143)},130:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(6),l=a(11),i=a(35),r=a(15),s=a(55),u=a(19),m=a(75),p=a.n(m).a.create({baseURL:"https://elib.nlu.org.ua/mobile/api/index.php",responseType:"json",headers:{accept:"*/*",contentType:"application/json"}});p.interceptors.response.use((function(e){return e}),(function(e){return console.log(e.response.data.errors),Promise.reject(e)}));var h=a(76),b=a.n(h),d=a(46),E={collections:[],object:{},viewMode:!1},g=function(e,t){switch(e||(e=E),t.type){case"GET_COLLECTION_SUCCESS":return Object(d.a)({},e,{collections:t.payload.data});case"GET_OBJECT_SUCCESS":case"GET_OBJECT_VIEW_SUCCESS":return Object(d.a)({},e,{object:t.payload.data});case"SET_VIEW_MODE":return Object(d.a)({},e,{viewMode:t.value});default:return e}},O=(a(130),a(17)),j=a(10),f=a(24),v=a(25),y=a(9),C=a(28),k=a(175),M=a(178),w=a(179),S=a(56),I=a(82),N=a.n(I),T=a(83),_=a.n(T),x=a(187),P=a(180),z=a(147),Z=a(181),D=a(27),F=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={isOpenMenu:!1},a.toggleMenu=a.toggleMenu.bind(Object(y.a)(a)),a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"toggleMenu",value:function(){this.setState({isOpenMenu:!this.state.isOpenMenu})}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.props.main.viewMode?o.a.createElement(o.a.Fragment,null):o.a.createElement(k.a,{position:"fixed"},o.a.createElement(M.a,null,o.a.createElement(w.a,{edge:"start",className:"menu-button",color:"inherit","aria-label":"menu"},o.a.createElement(N.a,{onClick:this.toggleMenu})),o.a.createElement(S.a,{variant:"h6",className:"menu-title"},"\u041a\u0443\u043b\u044c\u0442\u0443\u0440\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0438"),o.a.createElement(w.a,{edge:"start",className:"menu-button",color:"inherit"},o.a.createElement(_.a,null)))),o.a.createElement(x.a,{className:"left-menu",anchor:"left",open:this.state.isOpenMenu,onClose:this.toggleMenu},o.a.createElement(P.a,null,o.a.createElement(D.a,{to:"/"},o.a.createElement(z.a,{className:"left-menu-item",onClick:this.toggleMenu},o.a.createElement(Z.a,{primary:"\u041d\u0430 \u0433\u043e\u043b\u043e\u0432\u043d\u0443"}))))),this.props.children)}}]),t}(n.Component),V=Object(r.c)((function(e,t){return{main:e.main}}))(F),B=a(182),U=a(189),G=a(183),L=a(184),J=(Object(B.a)((function(e){return Object(U.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},media:{height:140},card:{textAlign:"center",border:"1px solid #acacac",padding:20}})})),function(e){function t(){return Object(O.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.getCollection()}},{key:"render",value:function(){console.log(this.props);return o.a.createElement(o.a.Fragment,null,this.props.collections.items?this.props.collections.items.map((function(e){return o.a.createElement(D.a,{key:e.id,to:"/collection/"+e.id},o.a.createElement(G.a,{className:"card"},o.a.createElement("img",{className:"card-img",src:"https://elib.nlu.org.ua/resourses/collections/"+e.id+"/cover.jpg"}),o.a.createElement(L.a,{className:"card-content"},o.a.createElement(S.a,{variant:"h5",component:"h2",className:"card-title"},e.title))))})):o.a.createElement(o.a.Fragment,null))}}]),t}(n.Component));function W(e){return{type:"GET_COLLECTION",payload:{request:{url:"",method:"POST",data:{action:"getCollection",id:e,language:1}}}}}var R=Object(r.c)((function(e,t){return{collections:e.main.collections}}),(function(e,t){return{getCollection:function(){return e(W(0))}}}))(J);var q,A=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{class:"CollectionItem"},o.a.createElement("img",{title:e.title,src:e.cover,width:"93",height:"97"}),o.a.createElement("div",{title:e.title},e.title)))},X=function(e){function t(){return Object(O.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{className:"object-breadcrumbs"},this.props.breadcrumbs?this.props.breadcrumbs.map((function(e){return o.a.createElement("li",null,o.a.createElement(D.a,{to:"/collection/"+e.id},o.a.createElement("span",null,e.title)))})):o.a.createElement(o.a.Fragment,null)))}}]),t}(n.Component),H=function(e){function t(){return Object(O.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.match.params.id),this.props.getCollection(this.props.match.params.id)}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.props.getCollection(this.props.match.params.id)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(X,{breadcrumbs:this.props.collections.parent}),o.a.createElement("center",null,o.a.createElement("h3",null,this.props.collections.title)),this.props.collections.items?this.props.collections.items.map((function(e){return o.a.createElement(D.a,{key:e.id,to:("book"===e.type?"/object/":"/collection/")+e.id},o.a.createElement(A,{cover:"https://elib.nlu.org.ua/pic.php?w=93&h=97&pic="+("book"===e.type?e.path:"resourses/collections/"+e.id)+"/cover.jpg",title:e.title,id:e.id}))})):o.a.createElement(o.a.Fragment,null))}}]),t}(n.Component),K=Object(r.c)((function(e,t){return{collections:e.main.collections}}),(function(e,t){return{getCollection:function(t){return e(W(t))}}}))(H),Q=a(84),Y=a.n(Q),$=function(e){function t(){return Object(O.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.getObject(this.props.match.params.id)}},{key:"render",value:function(){return console.log(this.props),o.a.createElement(o.a.Fragment,null,o.a.createElement(X,{breadcrumbs:this.props.object.parent}),o.a.createElement("center",null,o.a.createElement("h3",null,this.props.object.title)),o.a.createElement("center",null,o.a.createElement("div",{class:"ObjImg"},o.a.createElement(D.a,{to:"/view/"+this.props.object.id},o.a.createElement("img",{src:"https://elib.nlu.org.ua/pic.php?w=152&h=198&pic="+this.props.object.path+"/cover.jpg"})))),o.a.createElement("div",{class:"book-description"},this.props.object.description),o.a.createElement("div",{className:"ObjBibOpus"},o.a.createElement("b",null,"\u0411\u0456\u0431\u043b\u0456\u043e\u0433\u0440\u0430\u0444\u0456\u0447\u043d\u0438\u0439 \u043e\u043f\u0438\u0441:"),o.a.createElement("br",null),"string"===typeof this.props.object.metadata?Y()(this.props.object.metadata):""))}}]),t}(n.Component),ee=Object(r.c)((function(e,t){return{object:e.main.object}}),(function(e,t){return{getObject:function(t){return e(function(e){return{type:"GET_OBJECT",payload:{request:{url:"",method:"POST",data:{action:"getObject",id:e,language:1}}}}}(t))}}}))($),te=a(85),ae=a(190),ne=a(191),oe=a(92),ce=a.n(oe),le=a(93),ie=a.n(le),re=a(87),se=a.n(re),ue=a(90),me=a.n(ue),pe=a(89),he=a.n(pe),be=a(86),de=a.n(be),Ee=a(88),ge=a.n(Ee),Oe=a(91),je=a.n(Oe),fe=a(188),ve=a(185),ye=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={page:1,zoom:1,isOpenMenu:!1,isOpenZmist:!1},a.nextPage=a.nextPage.bind(Object(y.a)(a)),a.prevPage=a.prevPage.bind(Object(y.a)(a)),a.zoomIn=a.zoomIn.bind(Object(y.a)(a)),a.zoomOut=a.zoomOut.bind(Object(y.a)(a)),a.openMenu=a.openMenu.bind(Object(y.a)(a)),a.closeMenu=a.closeMenu.bind(Object(y.a)(a)),a.openZmist=a.openZmist.bind(Object(y.a)(a)),a.closeZmist=a.closeZmist.bind(Object(y.a)(a)),a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.getObjectView(this.props.match.params.id),this.props.setViewMode(!0)}},{key:"componentWillUnmount",value:function(){this.props.setViewMode(!1)}},{key:"nextPage",value:function(){this.state.page<this.props.object.pages.length-1?this.goToPage(this.state.page+1):this.goToPage(this.props.object.pages.length-1)}},{key:"prevPage",value:function(){this.goToPage(this.state.page-1)}},{key:"zoomIn",value:function(){this.setState({zoom:this.state.zoom+.1})}},{key:"zoomOut",value:function(){this.state.zoom>=1.1&&this.setState({zoom:this.state.zoom-.1})}},{key:"goToPage",value:function(e){e<1&&(e=1),this.setState({page:e})}},{key:"openMenu",value:function(){this.setState({isOpenMenu:!0})}},{key:"closeMenu",value:function(){this.setState({isOpenMenu:!1})}},{key:"openZmist",value:function(){this.setState({isOpenMenu:!1,isOpenZmist:!0})}},{key:"closeZmist",value:function(){this.setState({isOpenZmist:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(k.a,{position:"fixed"},o.a.createElement(M.a,null,o.a.createElement(D.a,{style:{color:"#fff"},to:"/object/"+this.props.match.params.id},o.a.createElement(w.a,{edge:"start",className:"menu-button",color:"inherit","aria-label":"menu"},o.a.createElement(de.a,{onClick:this.zoomIn}))),o.a.createElement(S.a,{variant:"h6",className:"menu-title"},"\u041a\u0443\u043b\u044c\u0442\u0443\u0440\u0430 \u0423\u043a\u0440\u0430\u0457\u043d\u0438"),o.a.createElement(w.a,{edge:"start",className:"menu-button",color:"inherit",id:"menuButton",onClick:this.openMenu},o.a.createElement(se.a,null)),o.a.createElement(fe.a,{id:"simple-menu",anchorEl:document.getElementById("menuButton"),keepMounted:!0,open:this.state.isOpenMenu,onClose:this.closeMenu},o.a.createElement(ve.a,{onClick:this.openZmist},"\u0417\u043c\u0456\u0441\u0442")))),o.a.createElement("div",{className:"page-view-control"},o.a.createElement(w.a,{edge:"start",className:"menu-button",color:"inherit","aria-label":"menu"},o.a.createElement(ge.a,{onClick:this.zoomIn})),o.a.createElement("div",{className:"controls"},o.a.createElement(w.a,{edge:"start",className:"menu-button",color:"inherit","aria-label":"menu"},o.a.createElement(he.a,{onClick:this.prevPage})),o.a.createElement("span",{className:"page-view-control-pages"},this.state.page+" / "+(this.props.object.pages?this.props.object.pages.length-1:"")),o.a.createElement(w.a,{edge:"start",className:"menu-button",color:"inherit","aria-label":"menu"},o.a.createElement(me.a,{onClick:this.nextPage}))),o.a.createElement(w.a,{edge:"start",className:"menu-button",color:"inherit","aria-label":"menu"},o.a.createElement(je.a,{onClick:this.zoomOut}))),o.a.createElement("div",{className:"page-view"},o.a.createElement(te.a,{onSwipedLeft:function(){e.state.zoom<=1&&e.nextPage()},onSwipedRight:function(){e.state.zoom<=1&&e.prevPage()},onSwipedDown:function(){},onSwipedUp:function(){}},o.a.createElement("img",{style:{width:100*this.state.zoom+"%"},src:"http://elib.nlu.org.ua/"+this.props.object.path+"/jpg/"+(this.props.object.pages?this.props.object.pages[this.state.page]:"")}))),o.a.createElement(x.a,{className:"left-menu",anchor:"left",open:this.state.isOpenZmist,onClose:this.closeZmist},o.a.createElement(ae.a,{style:{width:"70vw"},defaultCollapseIcon:o.a.createElement(ce.a,null),defaultExpandIcon:o.a.createElement(ie.a,null)},o.a.createElement(ne.a,{nodeId:"1",label:"Applications"},o.a.createElement(ne.a,{nodeId:"2",label:"Calendar"}),o.a.createElement(ne.a,{nodeId:"3",label:"Chrome"}),o.a.createElement(ne.a,{nodeId:"4",label:"Webstorm"})),o.a.createElement(ne.a,{nodeId:"5",label:"Documents"},o.a.createElement(ne.a,{nodeId:"10",label:"OSS"}),o.a.createElement(ne.a,{nodeId:"6",label:"Material-UI"},o.a.createElement(ne.a,{nodeId:"7",label:"src"},o.a.createElement(ne.a,{nodeId:"8",label:"index.js"}),o.a.createElement(ne.a,{nodeId:"9",label:"tree-view.js"})))))))}}]),t}(n.Component),Ce=Object(r.c)((function(e,t){return{object:e.main.object}}),(function(e,t){return{getObjectView:function(t){return e(function(e){return{type:"GET_OBJECT_VIEW",payload:{request:{url:"",method:"POST",data:{action:"getObjectView",id:e,language:1}}}}}(t))},setViewMode:function(t){return e(function(e){return{type:"SET_VIEW_MODE",value:e}}(t))}}}))(ye),ke=Object(u.d)(),Me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,we=Object(i.e)((q=ke,Object(i.c)({router:Object(s.b)(q),main:g})),Me(Object(i.a)(b()(p))));Object(c.render)(o.a.createElement(r.a,{store:we},o.a.createElement(s.a,{history:ke},o.a.createElement(V,null,o.a.createElement(l.a,{exact:!0,path:"/",component:R}),o.a.createElement(l.a,{exact:!0,path:"/collection/:id",component:K}),o.a.createElement(l.a,{exact:!0,path:"/object/:id",component:ee}),o.a.createElement(l.a,{exact:!0,path:"/view/:id",component:Ce})))),document.getElementById("root"))}},[[103,1,2]]]);
//# sourceMappingURL=main.481093a3.chunk.js.map